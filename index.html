<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ESSENCE | CONTROL TOTAL</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --b: #000000;
            --w: #ffffff;
            --g: #f5f5f7;
            --gold: #b8952e;
            --red: #ff3b30;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--w); color: var(--b); overflow-x: hidden; }

        /* HEADER */
        header {
            height: 80px; display: flex; justify-content: space-between; align-items: center;
            padding: 0 5%; border-bottom: 1px solid var(--g); position: sticky; top: 0;
            background: rgba(255,255,255,0.98); z-index: 10000;
        }
        .logo { font-family: 'Cinzel'; font-size: 1.6rem; font-weight: 900; letter-spacing: 10px; cursor: pointer; }
        
        .nav-right { display: flex; gap: 15px; }
        .btn-top { 
            font-size: 0.65rem; font-weight: 900; letter-spacing: 2px; text-transform: uppercase;
            padding: 10px 15px; cursor: pointer; border: 1px solid var(--b); background: none;
        }
        .btn-top.black { background: var(--b); color: var(--w); }

        /* HERO */
        .hero {
            height: 300px; background: #000; display: flex; align-items: center; justify-content: center;
            text-align: center; color: #fff; position: relative; overflow: hidden;
        }
        .hero img { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0.5; filter: grayscale(1); }
        .hero-h { z-index: 10; font-family: 'Cinzel'; font-size: 2.5rem; letter-spacing: 15px; }

        /* FILTROS */
        .filter-bar { 
            display: flex; justify-content: center; gap: 10px; padding: 40px 5%; 
            background: var(--w); position: sticky; top: 80px; z-index: 9000;
        }
        .f-btn { 
            padding: 10px 20px; border: 1px solid #ddd; font-size: 0.6rem; font-weight: 800;
            cursor: pointer; letter-spacing: 2px; text-transform: uppercase; background: #fff;
        }
        .f-btn.active { background: var(--b); color: #fff; border-color: var(--b); }

        /* GRID */
        .main-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 40px; padding: 0 5% 100px; max-width: 1400px; margin: 0 auto;
        }
        
        .card { position: relative; display: flex; flex-direction: column; }
        .img-box { 
            background: var(--g); aspect-ratio: 1/1.2; display: flex; align-items: center; 
            justify-content: center; position: relative; overflow: hidden; border: 1px solid #eee;
        }
        .img-box img { width: 80%; transition: 0.5s; }
        
        .sold-out { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255,255,255,0.85); display: none; align-items: center; justify-content: center; 
            z-index: 10; backdrop-filter: blur(5px);
        }
        .sold-out b { font-family: 'Cinzel'; font-size: 1.5rem; border: 3px solid #000; padding: 10px 20px; transform: rotate(-10deg); }
        .is-out .sold-out { display: flex; }

        .info { padding: 20px 0; text-align: left; }
        .info .cat { font-size: 0.6rem; color: var(--gold); font-weight: 900; letter-spacing: 3px; margin-bottom: 5px; display: block; }
        .info .name { font-family: 'Cinzel'; font-size: 1.1rem; font-weight: 700; margin-bottom: 8px; }
        .info .price { font-size: 1.3rem; font-weight: 200; }

        .btn-buy { 
            width: 100%; padding: 20px; background: var(--b); color: var(--w); border: none;
            font-size: 0.7rem; font-weight: 900; letter-spacing: 4px; cursor: pointer;
        }
        .btn-buy:disabled { background: #ddd; color: #aaa; }

        /* PANEL DE CONTROL JEFE (ELIMINAR/AGOTAR) */
        .boss-hud {
            display: none; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;
            padding: 10px; border: 1px solid #000; background: #fafafa;
        }
        .btn-admin { 
            padding: 12px; font-size: 0.6rem; font-weight: 900; cursor: pointer; 
            background: #fff; border: 1px solid #000; text-transform: uppercase;
        }
        .btn-admin.del { color: var(--red); border-color: var(--red); }

        /* MODALES */
        .modal { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255,255,255,0.98); z-index: 100000; align-items: center; justify-content: center;
        }
        .m-content { width: 90%; max-width: 450px; text-align: center; padding: 50px; border: 1px solid #eee; box-shadow: 0 20px 50px rgba(0,0,0,0.05); }
        .m-content h2 { font-family: 'Cinzel'; margin-bottom: 30px; letter-spacing: 5px; }
        .m-content input, .m-content select { width: 100%; padding: 18px; margin-bottom: 15px; border: 1px solid #ddd; background: #f9f9f9; font-size: 1rem; }

        /* MOBILE */
        @media (max-width: 768px) {
            .main-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 20px 3%; }
            .hero-h { font-size: 1.5rem; letter-spacing: 8px; }
            .info .name { font-size: 0.8rem; }
            .info .price { font-size: 1rem; }
            .btn-buy { padding: 15px; font-size: 0.6rem; }
            .filter-bar { padding: 20px 3%; overflow-x: auto; justify-content: flex-start; }
            .f-btn { white-space: nowrap; padding: 8px 15px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo" id="master-key">ESSENCE</div>
        <div class="nav-right">
            <button class="btn-top" onclick="openM('mod-auth')">Login</button>
            <button class="btn-top black" onclick="openM('mod-auth')">Socio Plus</button>
        </div>
    </header>

    <section class="hero">
        <img src="https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?q=80&w=2000&auto=format&fit=crop">
        <h1 class="hero-h">OMNIVERSE</h1>
    </section>

    <div class="filter-bar">
        <div class="f-btn active" onclick="setFilter('ALL', this)">Todo</div>
        <div class="f-btn" onclick="setFilter('NICHO', this)">Nicho</div>
        <div class="f-btn" onclick="setFilter('DISEÑADOR', this)">Diseñador</div>
        <div class="f-btn" onclick="setFilter('ARABE', this)">Árabe</div>
    </div>

    <main class="main-grid" id="grid"></main>

    <div class="modal" id="mod-boss">
        <div class="m-content">
            <h2>CARGAR PRODUCTO</h2>
            <input id="in-n" placeholder="Nombre de la Fragancia">
            <input id="in-p" type="number" placeholder="Precio ($)">
            <input id="in-i" placeholder="URL de Imagen">
            <select id="in-c">
                <option value="NICHO">NICHO</option>
                <option value="DISEÑADOR">DISEÑADOR</option>
                <option value="ARABE">ÁRABE</option>
            </select>
            <button class="btn-buy" onclick="bossAdd()">PUBLICAR AHORA</button>
            <button class="btn-buy" style="background:#444; margin-top:10px;" onclick="closeM('mod-boss')">VER TIENDA</button>
            <p onclick="location.reload()" style="margin-top:20px; font-size:0.6rem; cursor:pointer; color:red;">CERRAR SESIÓN JEFE</p>
        </div>
    </div>

    <div class="modal" id="mod-auth">
        <div class="m-content">
            <h2>SISTEMA SOCIO</h2>
            <input id="reg-n" placeholder="Nombre Completo">
            <input id="reg-e" placeholder="Correo Electrónico">
            <button class="btn-buy" onclick="register()">ACCEDER</button>
            <p onclick="closeM('mod-auth')" style="margin-top:20px; cursor:pointer; font-size:0.6rem;">CANCELAR</p>
        </div>
    </div>

    <div class="modal" id="mod-buy">
        <div class="m-content">
            <h2 id="buy-n"></h2>
            <h1 id="buy-p" style="margin-bottom:30px; font-weight:200;"></h1>
            <input id="buy-cli" placeholder="Tu Nombre">
            <button class="btn-buy" onclick="sendWA()">PEDIR POR WHATSAPP</button>
            <p onclick="closeM('mod-buy')" style="margin-top:20px; cursor:pointer; font-size:0.6rem;">VOLVER</p>
        </div>
    </div>

    <script>
        const WHATSAPP = "50769028805";
        const PASS = "542497";

        let state = {
            products: JSON.parse(localStorage.getItem('ess_db')) || [
                {id: 1, n: "Lafayette St Bond", p: 295, i: "https://fimgs.net/images/perfume/nd.46169.jpg", c: "NICHO", s: true},
                {id: 2, n: "Erba Pura Xerjoff", p: 250, i: "https://fimgs.net/images/perfume/nd.54003.jpg", c: "NICHO", s: true}
            ],
            user: JSON.parse(localStorage.getItem('ess_user')) || null,
            isAdmin: false,
            filter: 'ALL'
        };

        function render() {
            const grid = document.getElementById('grid');
            grid.innerHTML = "";

            const items = state.filter === 'ALL' ? state.products : state.products.filter(p => p.c === state.filter);

            items.forEach((p) => {
                const card = document.createElement('div');
                card.className = `card ${!p.s ? 'is-out' : ''}`;
                card.innerHTML = `
                    <div class="img-box">
                        <img src="${p.i}">
                        <div class="sold-out"><b>AGOTADO</b></div>
                    </div>
                    <div class="info">
                        <span class="cat">${p.c}</span>
                        <div class="name">${p.n}</div>
                        <div class="price">$${p.p}.00</div>
                    </div>
                    <button class="btn-buy" ${!p.s ? 'disabled' : ''} onclick="initBuy(${p.id})">COMPRAR</button>
                    
                    <div class="boss-hud" style="display: ${state.isAdmin ? 'grid' : 'none'}">
                        <button class="btn-admin" onclick="bossToggle(${p.id})">${p.s ? 'AGOTAR' : 'ACTIVAR'}</button>
                        <button class="btn-admin del" onclick="bossDel(${p.id})">ELIMINAR</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        /* FILTROS */
        window.setFilter = (c, el) => {
            state.filter = c;
            document.querySelectorAll('.f-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            render();
        };

        /* ACCIONES JEFE */
        window.bossAdd = () => {
            const n = document.getElementById('in-n').value, p = document.getElementById('in-p').value, i = document.getElementById('in-i').value, c = document.getElementById('in-c').value;
            if(n && p) {
                state.products.unshift({id: Date.now(), n, p, i, c, s: true});
                save(); render();
                alert("PRODUCTO CARGADO");
            }
        };

        window.bossDel = (id) => {
            if(confirm("¿ELIMINAR PERMANENTEMENTE?")) {
                state.products = state.products.filter(p => p.id !== id);
                save(); render();
            }
        };

        window.bossToggle = (id) => {
            const idx = state.products.findIndex(p => p.id === id);
            state.products[idx].s = !state.products[idx].s;
            save(); render();
        };

        /* ACCIONES CLIENTE */
        window.initBuy = (id) => {
            const p = state.products.find(x => x.id === id);
            document.getElementById('buy-n').innerText = p.n;
            document.getElementById('buy-p').innerText = `$${p.p}`;
            if(state.user) document.getElementById('buy-cli').value = state.user.name;
            openM('mod-buy');
        };

        window.sendWA = () => {
            const n = document.getElementById('buy-n').innerText;
            const cli = document.getElementById('buy-cli').value || "Cliente";
            window.open(`https://wa.me/${WHATSAPP}?text=Hola Essence, quiero comprar: ${n}. Mi nombre es ${cli}.`);
        };

        window.register = () => {
            const n = document.getElementById('reg-n').value;
            if(n) { state.user = {name: n}; save(); location.reload(); }
        };

        /* CORE */
        function openM(id) { document.getElementById(id).style.display = 'flex'; }
        function closeM(id) { document.getElementById(id).style.display = 'none'; }
        function save() { localStorage.setItem('ess_db', JSON.stringify(state.products)); localStorage.setItem('ess_user', JSON.stringify(state.user)); }

        let clicks = 0;
        document.getElementById('master-key').onclick = () => {
            clicks++;
            if(clicks >= 3) {
                if(prompt("PASSWORD:") === PASS) {
                    state.isAdmin = true;
                    openM('mod-boss');
                    render();
                }
                clicks = 0;
            }
        };

        render();
    </script>
</body>
</html>



