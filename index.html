<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ESSENCE ELITE | Luxury Fragrance Management</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- ARQUITECTURA DE SOFTWARE ESSENCE v6.0 ---
           PROYECTO: ESSENCE LUXURY SYSTEM
           LINEAS ESTIMADAS: 1600+ (CSS INYECTADO + JS CORE)
           DISE√ëO: MINIMALISTA DE ALTO IMPACTO
        */

        :root {
            --essence-gold: #b8952e;
            --essence-gold-soft: #e0c56e;
            --essence-black: #000000;
            --essence-white: #ffffff;
            --essence-gray-1: #f9f9fb;
            --essence-gray-2: #f1f1f4;
            --essence-gray-3: #e2e2e7;
            --essence-red: #c0392b;
            --essence-green: #27ae60;
            --essence-transition: all 0.7s cubic-bezier(0.19, 1, 0.22, 1);
            --essence-shadow: 0 40px 100px rgba(0,0,0,0.08);
        }

        /* RESET DE INTERFAZ */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        html { scroll-behavior: smooth; font-size: 16px; background: var(--essence-white); }
        body { font-family: 'Inter', sans-serif; color: var(--essence-black); overflow-x: hidden; line-height: 1.5; }

        /* BARRA SUPERIOR DIN√ÅMICA */
        .top-nav-status {
            background: var(--essence-black); color: var(--essence-white);
            padding: 12px 6%; display: flex; justify-content: space-between;
            align-items: center; font-size: 0.65rem; letter-spacing: 4px;
            text-transform: uppercase; font-weight: 700; position: fixed;
            top: 0; width: 100%; z-index: 10000;
            border-bottom: 1px solid var(--essence-gold);
        }
        .points-pill { background: var(--essence-gold); color: #000; padding: 4px 12px; font-weight: 900; border-radius: 1px; }

        /* HEADER MINIMALISTA */
        header {
            margin-top: 45px; padding: 40px 6%; display: flex;
            justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(30px);
            position: sticky; top: 40px; z-index: 9999;
            border-bottom: 1px solid var(--essence-gray-2);
        }
        .logo { font-family: 'Cinzel', serif; font-size: 2.2rem; font-weight: 900; letter-spacing: 15px; cursor: pointer; transition: var(--essence-transition); user-select: none; }
        .logo:hover { color: var(--essence-gold); transform: translateY(-2px); }

        .nav-actions { display: flex; gap: 30px; align-items: center; }
        .nav-btn { font-size: 0.7rem; font-weight: 800; letter-spacing: 3px; text-transform: uppercase; cursor: pointer; position: relative; }
        .nav-btn::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 1.5px; background: var(--essence-gold); transition: 0.4s; }
        .nav-btn:hover::after { width: 100%; }

        /* HERO SECTION */
        .hero-minimal { padding: 60px 6% 20px; text-align: center; }
        .hero-card {
            width: 100%; height: 400px; background: #000; display: flex;
            align-items: center; justify-content: center; position: relative;
            overflow: hidden; cursor: pointer;
        }
        .hero-card h2 { font-family: 'Cinzel'; color: var(--essence-gold); font-size: 3rem; letter-spacing: 12px; z-index: 5; text-transform: uppercase; }
        .hero-card p { position: absolute; bottom: 40px; color: #fff; font-size: 0.8rem; letter-spacing: 5px; text-transform: uppercase; }
        .hero-bg { position: absolute; width: 100%; height: 100%; background: url('https://images.unsplash.com/photo-1541643600914-78b084683601?q=80&w=1920&auto=format&fit=crop') center/cover; opacity: 0.4; transition: 2s; }
        .hero-card:hover .hero-bg { transform: scale(1.1); opacity: 0.6; }

        /* GRID DE CAT√ÅLOGO */
        .catalogue { padding: 80px 6%; max-width: 1800px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 80px 40px; }

        @media (max-width: 1024px) {
            .grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
            .hero-card h2 { font-size: 1.8rem; letter-spacing: 6px; }
        }

        @media (max-width: 600px) {
            .grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 30px 15px; }
            .logo { font-size: 1.2rem; letter-spacing: 5px; }
            .hero-card { height: 250px; }
        }

        /* TARJETA DE PRODUCTO MINIMALISTA */
        .product-card { background: #fff; position: relative; transition: var(--essence-transition); display: flex; flex-direction: column; }
        
        .image-wrapper {
            background: var(--essence-gray-1); aspect-ratio: 1/1.2; display: flex;
            align-items: center; justify-content: center; position: relative;
            overflow: hidden; transition: var(--essence-transition);
            border: 1px solid var(--essence-gray-2);
        }
        .image-wrapper img { max-width: 75%; transition: 1s cubic-bezier(0.19, 1, 0.22, 1); }
        .product-card:hover .image-wrapper img { transform: scale(1.08) translateY(-10px); }

        /* BADGE SOLD OUT */
        .soldout-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); display: none; z-index: 10;
            align-items: center; justify-content: center; backdrop-filter: grayscale(1);
        }
        .soldout-label {
            font-family: 'Cinzel'; font-weight: 900; font-size: 1.5rem; letter-spacing: 5px;
            color: var(--essence-red); border: 3px solid var(--essence-red); padding: 15px 30px;
            transform: rotate(-10deg); box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .is-soldout .soldout-overlay { display: flex; }

        /* INFO TEXTO */
        .info-box { padding: 30px 0; flex-grow: 1; text-align: center; }
        .p-name { font-family: 'Cinzel'; font-size: 1.3rem; font-weight: 700; letter-spacing: 4px; margin-bottom: 12px; }
        .p-price { font-size: 1.6rem; color: var(--essence-gold); font-weight: 200; letter-spacing: 2px; }

        .btn-order {
            width: 100%; padding: 22px; background: var(--essence-black); color: var(--essence-white);
            border: 1px solid var(--essence-black); font-family: 'Inter'; font-size: 0.75rem;
            font-weight: 900; letter-spacing: 5px; text-transform: uppercase; cursor: pointer;
            transition: 0.4s;
        }
        .btn-order:hover { background: transparent; color: var(--essence-black); }
        .btn-order:disabled { background: #eee; border-color: #eee; color: #aaa; cursor: not-allowed; }

        /* üëë SISTEMA DE CONTROL JEFE INTEGRADO üëë */
        .boss-dashboard-tools {
            display: none; /* Se activa con el log del jefe */
            margin-top: 15px; border: 2px solid var(--essence-gold); padding: 15px;
            background: #fff; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        .tool-btn {
            padding: 12px; font-size: 0.6rem; font-weight: 900; text-transform: uppercase;
            cursor: pointer; border: 1px solid var(--essence-black); background: #fff;
        }
        .tool-btn:hover { background: #000; color: #fff; }
        .tool-btn.danger { border-color: var(--essence-red); color: var(--essence-red); }
        .tool-btn.danger:hover { background: var(--essence-red); color: #fff; }

        /* PANEL LATERAL DE GESTI√ìN (DRAWER) */
        .boss-side-drawer {
            position: fixed; top: 0; right: -100%; width: 500px; height: 100%;
            background: #fff; z-index: 20000; transition: 0.6s cubic-bezier(0.19, 1, 0.22, 1);
            box-shadow: -30px 0 70px rgba(0,0,0,0.1); padding: 60px 40px; overflow-y: auto;
        }
        .boss-side-drawer.active { right: 0; }
        @media (max-width: 600px) { .boss-side-drawer { width: 100%; } }

        /* GESTOR DE USUARIOS */
        .user-card {
            padding: 20px; border-bottom: 1px solid var(--essence-gray-2);
            display: flex; justify-content: space-between; align-items: center;
        }
        .user-info b { display: block; font-size: 0.9rem; }
        .user-info small { color: #888; font-size: 0.7rem; }
        .btn-ban { color: var(--essence-red); font-weight: 900; font-size: 0.7rem; cursor: pointer; letter-spacing: 2px; }

        /* MODALES ELITE */
        .luxe-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98); z-index: 50000; align-items: center; justify-content: center;
            backdrop-filter: blur(15px);
        }
        .luxe-modal {
            width: 95%; max-width: 500px; padding: 70px 50px; background: #fff;
            border: 1px solid var(--essence-gray-2); text-align: center; box-shadow: var(--essence-shadow);
        }
        input, select {
            width: 100%; padding: 20px; margin-bottom: 20px; border: 1px solid var(--essence-gray-3);
            font-family: 'Inter'; font-size: 0.95rem; background: var(--essence-gray-1);
        }

        /* FOOTER */
        footer { background: var(--essence-gray-1); padding: 120px 6%; margin-top: 150px; border-top: 1px solid var(--essence-gray-2); }
        .f-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 80px; }
        .f-title { font-family: 'Cinzel'; font-size: 1.1rem; letter-spacing: 5px; margin-bottom: 30px; text-transform: uppercase; }
        .f-link { display: block; color: #777; text-decoration: none; font-size: 0.8rem; margin-bottom: 15px; letter-spacing: 2px; transition: 0.3s; }
        .f-link:hover { color: var(--essence-gold); transform: translateX(10px); }

    </style>
</head>
<body>

    <div class="top-nav-status">
        <div id="status-text">SISTEMA DE GESTI√ìN ESSENCE ELITE</div>
        <div id="status-points">PUNTOS VIP: <span class="points-pill">0</span></div>
    </div>

    <header>
        <div class="logo" id="master-trigger">ESSENCE</div>
        <div class="nav-actions">
            <span class="nav-btn" onclick="openModal('modal-reg')">Socio Plus</span>
            <span class="nav-btn" onclick="document.getElementById('footer').scrollIntoView()">Soporte</span>
        </div>
    </header>

    <section class="hero-minimal">
        <div class="hero-card" onclick="openModal('modal-reg')">
            <div class="hero-bg"></div>
            <h2>ELITE CLUB</h2>
            <p>GANA 3% POR CADA RECOMENDACI√ìN</p>
        </div>
    </section>

    <main class="catalogue">
        <div class="grid" id="product-grid">
            </div>
    </main>

    <div class="boss-side-drawer" id="boss-drawer">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:50px;">
            <h2 style="font-family:Cinzel; letter-spacing:5px;">MASTER CONSOLE</h2>
            <span onclick="toggleDrawer()" style="cursor:pointer; font-weight:900;">[ X ]</span>
        </div>

        <div style="background:var(--essence-gray-1); padding:30px; margin-bottom:40px;">
            <h4 style="font-family:Cinzel; margin-bottom:20px;">A√ëADIR PRODUCTO</h4>
            <input id="boss-p-name" placeholder="Nombre de la Fragancia">
            <input id="boss-p-price" type="number" placeholder="Precio ($)">
            <input id="boss-p-img" placeholder="URL de la Imagen">
            <button class="btn-order" onclick="bossAddProduct()">PUBLICAR EN TIENDA</button>
        </div>

        <h4 style="font-family:Cinzel; margin-bottom:20px;">GESTOR DE USUARIOS</h4>
        <div id="boss-user-list">
            </div>

        <button class="btn-order" style="margin-top:60px; background:var(--essence-red);" onclick="location.reload()">LOGOUT MASTER</button>
    </div>

    <div class="luxe-overlay" id="modal-reg">
        <div class="luxe-modal">
            <h2 style="font-family:Cinzel; margin-bottom:20px; letter-spacing:5px;">MEMBRES√çA VIP</h2>
            <p style="font-size:0.75rem; color:#888; margin-bottom:40px; letter-spacing:2px;">CONVI√âRTETE EN EMBAJADOR DE LUJO</p>
            <input id="reg-name" placeholder="Nombre Completo">
            <input id="reg-email" placeholder="Correo Electr√≥nico">
            <button class="btn-order" onclick="handleRegister()">REGISTRARME</button>
            <p onclick="closeModal('modal-reg')" style="margin-top:30px; cursor:pointer; font-size:0.6rem; text-decoration:underline;">VOLVER AL CAT√ÅLOGO</p>
        </div>
    </div>

    <div class="luxe-overlay" id="modal-buy">
        <div class="luxe-modal">
            <h2 id="buy-title" style="font-family:Cinzel; margin-bottom:10px;"></h2>
            <div id="buy-price" style="color:var(--essence-gold); font-weight:200; font-size:1.8rem; margin-bottom:30px;"></div>
            <input id="buy-customer" placeholder="Nombre para el pedido">
            <select id="buy-method">
                <option value="Yappy">YAPPY</option>
                <option value="Efectivo">EFECTIVO CONTRAENTREGA</option>
                <option value="Transferencia">TRANSFERENCIA</option>
            </select>
            <button class="btn-order" onclick="confirmPurchase()">PEDIR POR WHATSAPP</button>
            <p onclick="closeModal('modal-buy')" style="margin-top:30px; cursor:pointer; font-size:0.6rem;">CANCELAR</p>
        </div>
    </div>

    <footer id="footer">
        <div class="f-grid">
            <div>
                <h3 class="f-title">ESSENCE</h3>
                <p style="color:#888; font-size:0.85rem; line-height:2;">Curadur√≠a exclusiva de perfumer√≠a nicho y alta gama. Elevando el est√°ndar del lujo en Panam√°.</p>
            </div>
            <div>
                <h3 class="f-title">CONTACTO</h3>
                <a href="#" onclick="wa('Soporte')" class="f-link">ATENCI√ìN AL CLIENTE</a>
                <a href="#" onclick="wa('Trabajo')" class="f-link">EMBAJADORES</a>
                <a href="#" onclick="wa('Mayorista')" class="f-link">VENTAS AL MAYOR</a>
            </div>
            <div>
                <h3 class="f-title">LEGAL</h3>
                <a href="#" class="f-link">T√âRMINOS DE SERVICIO</a>
                <a href="#" class="f-link">POL√çTICA DE PRIVACIDAD</a>
            </div>
        </div>
    </footer>

    <script>
        /* --- ESSENCE MASTER LOGIC v6.0 ---
           CONTROL TOTAL DE INVENTARIO Y USUARIOS
        */

        const MASTER_PHONE = "50769028805";
        const MASTER_SECRET = "542497";

        let state = {
            products: JSON.parse(localStorage.getItem('es_v6_inv')) || [
                {id: 1, n: "Lafayette St Bond No. 9", p: 295, i: "https://fimgs.net/images/perfume/nd.46169.jpg", s: true},
                {id: 2, n: "Erba Pura Xerjoff", p: 250, i: "https://fimgs.net/images/perfume/nd.54003.jpg", s: true},
                {id: 3, n: "Khamrah Lattafa", p: 45, i: "https://fimgs.net/images/perfume/nd.75805.jpg", s: true}
            ],
            users: JSON.parse(localStorage.getItem('es_v6_usr')) || {},
            session: JSON.parse(localStorage.getItem('es_v6_ses')) || null,
            isAdmin: false,
            activeProduct: null,
            masterClicks: 0
        };

        /* RENDERIZADOR DEL CAT√ÅLOGO */
        function renderCatalogue() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = state.products.map((p, index) => `
                <div class="product-card ${!p.s ? 'is-soldout' : ''}">
                    <div class="image-wrapper">
                        <img src="${p.i || 'https://via.placeholder.com/400'}" alt="${p.n}">
                        <div class="soldout-overlay"><div class="soldout-label">AGOTADO</div></div>
                    </div>
                    <div class="info-box">
                        <h3 class="p-name">${p.n}</h3>
                        <span class="p-price">$${p.p}.00</span>
                    </div>
                    
                    <button class="btn-order" ${!p.s ? 'disabled' : ''} onclick="initPurchase(${index})">
                        ${p.s ? 'ORDENAR AHORA' : 'NO DISPONIBLE'}
                    </button>

                    <div class="boss-dashboard-tools" id="boss-tools-${index}" style="display: ${state.isAdmin ? 'grid' : 'none'}">
                        <button class="tool-btn" onclick="bossToggleStock(${index})">
                            ${p.s ? 'AGOTAR' : 'ACTIVAR'}
                        </button>
                        <button class="tool-btn danger" onclick="bossDeleteProduct(${index})">ELIMINAR</button>
                    </div>

                    <div style="margin-top:15px; text-align:center; font-size:0.6rem; color:#bbb; letter-spacing:2px;">
                        GANA $${(p.p * 0.03).toFixed(2)} CON ESTE PERFUME
                    </div>
                </div>
            `).join('');
            syncAppUI();
        }

        /* L√ìGICA DE COMPRA */
        window.initPurchase = (i) => {
            state.activeProduct = state.products[i];
            document.getElementById('buy-title').innerText = state.activeProduct.n;
            document.getElementById('buy-price').innerText = "$" + state.activeProduct.p + ".00";
            if(state.session) document.getElementById('buy-customer').value = state.session.name;
            openModal('modal-buy');
        };

        window.confirmPurchase = () => {
            const customer = document.getElementById('buy-customer').value || "Cliente Nuevo";
            const method = document.getElementById('buy-method').value;
            const msg = encodeURIComponent(`‚ú® *NUEVO PEDIDO ESSENCE*\n\nüèÜ *Producto:* ${state.activeProduct.n}\nüí∞ *Precio:* $${state.activeProduct.p}.00\nüë§ *Cliente:* ${customer}\nüí≥ *Pago:* ${method}`);
            window.open(`https://wa.me/${MASTER_PHONE}?text=${msg}`);
        };

        /* CONTROLES MAESTROS (BOSS) */
        window.bossAddProduct = () => {
            const n = document.getElementById('boss-p-name').value;
            const p = document.getElementById('boss-p-price').value;
            const i = document.getElementById('boss-p-img').value;
            if(n && p) {
                state.products.push({id: Date.now(), n, p, i, s: true});
                saveState(); renderCatalogue();
                alert("PRODUCTO SUBIDO AL CAT√ÅLOGO.");
            }
        };

        window.bossToggleStock = (i) => {
            state.products[i].s = !state.products[i].s;
            saveState(); renderCatalogue();
        };

        window.bossDeleteProduct = (i) => {
            if(confirm("¬øDeseas eliminar esta fragancia permanentemente?")) {
                state.products.splice(i, 1);
                saveState(); renderCatalogue();
            }
        };

        /* GESTI√ìN DE USUARIOS */
        function renderUserList() {
            const box = document.getElementById('boss-user-list');
            let html = '';
            for(let key in state.users) {
                const u = state.users[key];
                html += `
                    <div class="user-card">
                        <div class="user-info">
                            <b>${u.name}</b>
                            <small>${u.email} | ${u.pts} PTS</small>
                        </div>
                        <span class="btn-ban" onclick="bossBanUser('${key}')">BANEAR</span>
                    </div>
                `;
            }
            box.innerHTML = html || '<p style="font-size:0.7rem; color:#aaa;">No hay socios registrados.</p>';
        }

        window.bossBanUser = (email) => {
            if(confirm("¬øBANEAR DEFINITIVAMENTE A ESTE USUARIO?")) {
                delete state.users[email];
                saveState(); renderUserList();
            }
        };

        /* SISTEMA VIP */
        window.handleRegister = () => {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            if(name && email) {
                if(!state.users[email]) state.users[email] = {name, email, pts: 0};
                state.session = state.users[email];
                saveState(); location.reload();
            }
        };

        /* UTILIDADES DEL SISTEMA */
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function toggleDrawer() { document.getElementById('boss-drawer').classList.toggle('active'); }
        
        function saveState() {
            localStorage.setItem('es_v6_inv', JSON.stringify(state.products));
            localStorage.setItem('es_v6_usr', JSON.stringify(state.users));
            localStorage.setItem('es_v6_ses', JSON.stringify(state.session));
        }

        function syncAppUI() {
            if(state.session) {
                document.getElementById('status-text').innerText = "BIENVENIDO, SOCIO " + state.session.name.toUpperCase();
                document.getElementById('status-points').innerHTML = `PUNTOS VIP: <span class="points-pill">${state.session.pts}</span>`;
            }
        }

        function wa(t) { window.open(`https://wa.me/${MASTER_PHONE}?text=Hola Essence, quiero informaci√≥n sobre: ${t}`); }

        /* TRIGGER SECRETO JEFE */
        document.getElementById('master-trigger').onclick = () => {
            state.masterClicks++;
            if(state.masterClicks >= 3) {
                const pass = prompt("INTRODUZCA LLAVE MAESTRA:");
                if(pass === MASTER_SECRET) {
                    state.isAdmin = true;
                    toggleDrawer();
                    renderUserList();
                    renderCatalogue();
                }
                state.masterClicks = 0;
            }
        };

        // INICIALIZACI√ìN
        renderCatalogue();
    </script>
</body>
</html>
