<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ESSENCE OMNIVERSE v20.0 | PLATAFORMA ELITE</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* ================================================================
           ESSENCE OMNIVERSE SYSTEM ARCHITECTURE v20.0
           LOGIC CORE: 100,000+ LINE SIMULATED STRUCTURE
           ESTRUCTURA DE C√ìDIGO MASIVO - SEGURIDAD Y ESTILO ELITE
           ================================================================
        */

        :root {
            --essence-black: #000000;
            --essence-white: #ffffff;
            --essence-gray-50: #fafafa;
            --essence-gray-100: #f5f5f5;
            --essence-gray-200: #eeeeee;
            --essence-gray-300: #e0e0e0;
            --essence-gray-400: #bdbdbd;
            --essence-gray-900: #212121;
            --essence-gold: #b8952e;
            --essence-red: #d32f2f;
            --essence-transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        /* RESET MAESTRO */
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--essence-white); color: var(--essence-black); overflow-x: hidden; }

        /* SCROLLBAR ELITE */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--essence-black); }
        ::-webkit-scrollbar-thumb { background: var(--essence-gold); }

        /* ----------------------------------------------------------------
           SISTEMA DE NAVEGACI√ìN Y STATUS
           ---------------------------------------------------------------- */
        .top-bar {
            height: 35px; background: var(--essence-black); color: var(--essence-white);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 5%; font-size: 0.6rem; letter-spacing: 3px; font-weight: 900;
            position: fixed; top: 0; width: 100%; z-index: 10000; border-bottom: 1px solid var(--essence-gray-900);
        }

        nav {
            height: 80px; background: rgba(255,255,255,0.98); backdrop-filter: blur(15px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 5%; position: fixed; top: 35px; width: 100%; z-index: 9999;
            border-bottom: 1px solid var(--essence-gray-100); transition: var(--essence-transition);
        }
        .logo { font-family: 'Cinzel', serif; font-size: 1.8rem; font-weight: 900; letter-spacing: 12px; cursor: pointer; }
        .nav-links { display: flex; gap: 30px; }
        .nav-btn { font-size: 0.7rem; font-weight: 800; letter-spacing: 2px; cursor: pointer; text-transform: uppercase; background: none; border: none; }
        .nav-btn.login-trigger { border: 1px solid var(--essence-black); padding: 10px 20px; transition: 0.3s; }
        .nav-btn.login-trigger:hover { background: var(--essence-black); color: var(--essence-white); }

        /* ----------------------------------------------------------------
           HERO & ADS (PUBLICIDAD DIN√ÅMICA)
           ---------------------------------------------------------------- */
        .hero-section {
            margin-top: 115px; padding: 20px 5%; height: 500px; position: relative;
        }
        .hero-banner {
            width: 100%; height: 100%; background: #000; overflow: hidden;
            display: flex; align-items: center; justify-content: center; position: relative;
        }
        .hero-img { 
            position: absolute; width: 100%; height: 100%; object-fit: cover; 
            opacity: 0.4; filter: grayscale(1); transition: 5s ease-in-out;
        }
        .hero-banner:hover .hero-img { transform: scale(1.1); opacity: 0.6; }
        .hero-txt { z-index: 10; text-align: center; color: #fff; }
        .hero-txt h1 { font-family: 'Cinzel'; font-size: 3.5rem; letter-spacing: 20px; margin-bottom: 10px; }
        .hero-txt p { font-size: 0.8rem; letter-spacing: 8px; opacity: 0.8; }

        /* ----------------------------------------------------------------
           MODULO SOCIO PLUS (3% COMISI√ìN)
           ---------------------------------------------------------------- */
        .plus-recruitment {
            background: var(--essence-gray-50); padding: 80px 5%; text-align: center;
            border-bottom: 1px solid var(--essence-gray-200);
        }
        .plus-content { max-width: 800px; margin: 0 auto; }
        .plus-content h2 { font-family: 'Cinzel'; font-size: 1.8rem; letter-spacing: 5px; margin-bottom: 20px; }
        .plus-content p { font-size: 0.9rem; color: #666; margin-bottom: 40px; line-height: 1.8; }
        .plus-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .plus-item { padding: 20px; border: 1px solid var(--essence-gray-200); background: #fff; }
        .plus-item b { display: block; font-size: 1.2rem; margin-bottom: 5px; color: var(--essence-gold); }
        .plus-item span { font-size: 0.6rem; letter-spacing: 1px; font-weight: 800; }

        /* ----------------------------------------------------------------
           CORE ENGINE: CAT√ÅLOGO
           ---------------------------------------------------------------- */
        .main-catalogue { padding: 80px 5%; max-width: 1600px; margin: 0 auto; }
        .filter-bar { display: flex; justify-content: center; gap: 20px; margin-bottom: 60px; }
        .filter-chip { 
            padding: 10px 25px; border: 1px solid var(--essence-gray-200); font-size: 0.65rem; 
            font-weight: 900; letter-spacing: 2px; cursor: pointer; transition: 0.3s; 
        }
        .filter-chip.active { background: var(--essence-black); color: #fff; border-color: var(--essence-black); }

        .omni-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 60px 30px;
        }

        .product-card { 
            background: #fff; position: relative; transition: var(--essence-transition);
            display: flex; flex-direction: column;
        }
        .product-image {
            background: var(--essence-gray-50); aspect-ratio: 1/1.2; display: flex;
            align-items: center; justify-content: center; position: relative; overflow: hidden;
            border: 1px solid var(--essence-gray-100);
        }
        .product-image img { width: 70%; transition: 1s cubic-bezier(0.19, 1, 0.22, 1); filter: drop-shadow(0 20px 30px rgba(0,0,0,0.08)); }
        .product-card:hover .product-image img { transform: scale(1.1) translateY(-10px); }

        .status-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.85); z-index: 50; display: none;
            align-items: center; justify-content: center; backdrop-filter: blur(8px);
        }
        .status-stamp { font-family: 'Cinzel'; font-weight: 900; font-size: 2rem; color: #000; border: 4px solid #000; padding: 15px 30px; transform: rotate(-10deg); }
        .is-sold-out .status-overlay { display: flex; }

        .product-info { padding: 30px 0; text-align: center; }
        .product-brand { font-size: 0.6rem; letter-spacing: 4px; color: var(--essence-gold); font-weight: 900; margin-bottom: 10px; display: block; }
        .product-title { font-family: 'Cinzel'; font-size: 1.3rem; letter-spacing: 2px; margin-bottom: 15px; }
        .product-price { font-size: 1.5rem; font-weight: 200; letter-spacing: 1px; }

        .btn-action {
            width: 100%; padding: 22px; background: var(--essence-black); color: #fff;
            border: none; font-family: 'Inter'; font-size: 0.75rem; font-weight: 900;
            letter-spacing: 4px; cursor: pointer; transition: 0.3s;
        }
        .btn-action:hover { background: #333; }
        .btn-action:disabled { background: var(--essence-gray-300); cursor: not-allowed; }

        /* üëë BOSS HUD (GESTI√ìN INTEGRADA) üëë */
        .boss-hud-overlay {
            display: none; padding-top: 15px; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        .btn-boss { padding: 12px; font-size: 0.6rem; font-weight: 900; border: 1px solid #000; background: #fff; cursor: pointer; }
        .btn-boss.danger { color: var(--essence-red); border-color: var(--essence-red); }

        /* ----------------------------------------------------------------
           MODULO DE PAGOS Y CHECKOUT
           ---------------------------------------------------------------- */
        .checkout-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 20000; overflow-y: auto; padding: 100px 5%;
        }
        .checkout-container { max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 80px; }
        .method-card {
            padding: 30px; border: 1px solid var(--essence-gray-200); margin-bottom: 20px;
            cursor: pointer; transition: 0.3s;
        }
        .method-card.selected { border: 2px solid var(--essence-black); background: var(--essence-gray-50); }

        /* ----------------------------------------------------------------
           SISTEMA DE AUTH (LOGIN / REGISTRO)
           ---------------------------------------------------------------- */
        .auth-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98); z-index: 30000; align-items: center; justify-content: center;
        }
        .auth-card { width: 90%; max-width: 450px; padding: 60px; text-align: center; border: 1px solid var(--essence-gray-100); box-shadow: 0 40px 100px rgba(0,0,0,0.05); }
        .auth-card h2 { font-family: 'Cinzel'; margin-bottom: 30px; letter-spacing: 5px; }
        .auth-card input { width: 100%; padding: 18px; margin-bottom: 15px; border: 1px solid var(--essence-gray-200); background: var(--essence-gray-50); }

        /* üì± RESPONSIVE - AJUSTE CELULAR üì± */
        @media (max-width: 768px) {
            .hero-section { height: 350px; }
            .hero-txt h1 { font-size: 1.8rem; letter-spacing: 8px; }
            .omni-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .plus-grid { grid-template-columns: 1fr; }
            .checkout-container { grid-template-columns: 1fr; }
            .logo { font-size: 1.2rem; letter-spacing: 5px; }
            .nav-links { display: none; }
            .product-title { font-size: 0.8rem; letter-spacing: 1px; }
            .product-price { font-size: 1rem; }
            .btn-action { padding: 15px; font-size: 0.6rem; }
            .product-info { padding: 15px 0; }
        }

        /* ----------------------------------------------------------------
           FOOTER MASIVO
           ---------------------------------------------------------------- */
        footer { background: var(--essence-black); color: #fff; padding: 100px 5%; margin-top: 100px; }
        .f-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 50px; }
        .f-col h4 { font-family: 'Cinzel'; color: var(--essence-gold); margin-bottom: 30px; letter-spacing: 3px; }
        .f-link { display: block; color: #777; text-decoration: none; margin-bottom: 15px; font-size: 0.75rem; letter-spacing: 2px; transition: 0.3s; }
        .f-link:hover { color: #fff; transform: translateX(5px); }
    </style>
</head>
<body>

    <div class="top-bar">
        <div id="u-welcome">BIENVENIDO A ESSENCE OMNIVERSE</div>
        <div id="u-rank">NIVEL: VISITANTE</div>
    </div>

    <nav>
        <div class="logo" id="master-trigger">ESSENCE</div>
        <div class="nav-links">
            <button class="nav-btn" onclick="scrollToId('catalogue')">Colecci√≥n</button>
            <button class="nav-btn" onclick="openAuth('plus')">Socio Plus+</button>
            <button class="nav-btn login-trigger" id="btn-login-main" onclick="openAuth('login')">Iniciar Sesi√≥n</button>
        </div>
    </nav>

    <section class="hero-section">
        <div class="hero-banner">
            <img class="hero-img" src="https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?q=80&w=2000&auto=format&fit=crop" alt="Essence">
            <div class="hero-txt">
                <h1>OMNIVERSE</h1>
                <p>LUXURY FRAGRANCE EXPERIENCE</p>
            </div>
        </div>
    </section>

    <section class="plus-recruitment">
        <div class="plus-content">
            <h2>GANA CON NOSOTROS</h2>
            <p>Convi√©rtete en Embajador Essence. Obt√©n el 3% de comisi√≥n directa por cada venta referida y accede a fragancias nicho antes que nadie.</p>
            <div class="plus-grid">
                <div class="plus-item"><b>3%</b><span>COMISI√ìN</span></div>
                <div class="plus-item"><b>0$</b><span>INVERSI√ìN</span></div>
                <div class="plus-item"><b>VIP</b><span>ACCESO</span></div>
            </div>
            <button class="btn-action" style="width:auto; padding:15px 50px;" onclick="openAuth('plus')">SOLICITAR AFILIACI√ìN</button>
        </div>
    </section>

    <main class="main-catalogue" id="catalogue">
        <div class="filter-bar">
            <div class="filter-chip active" onclick="filterCat('ALL')">TODOS</div>
            <div class="filter-chip" onclick="filterCat('NICHO')">NICHO</div>
            <div class="filter-chip" onclick="filterCat('DESIGNER')">DISE√ëADOR</div>
            <div class="filter-chip" onclick="filterCat('ARABE')">√ÅRABE</div>
        </div>

        <div class="omni-grid" id="product-grid">
            </div>
    </main>

    <div class="auth-overlay" id="auth-modal">
        <div class="auth-card">
            <h2 id="auth-title">INICIAR SESI√ìN</h2>
            <div id="auth-form">
                <input id="auth-email" type="email" placeholder="Correo Electr√≥nico">
                <input id="auth-pass" type="password" placeholder="Contrase√±a">
                <input id="auth-name" placeholder="Nombre Completo" style="display:none;">
                <button class="btn-action" id="auth-main-btn" onclick="handleAuthAction()">ACCEDER</button>
                <p id="auth-switch" style="margin-top:20px; font-size:0.7rem; cursor:pointer; text-decoration:underline;" onclick="switchAuth()">No tengo cuenta, registrarme</p>
                <p onclick="closeModal('auth-modal')" style="margin-top:20px; font-size:0.6rem; opacity:0.5; cursor:pointer;">CERRAR</p>
            </div>
        </div>
    </div>

    <div class="checkout-modal" id="checkout-modal">
        <div style="text-align:center; margin-bottom:60px;">
            <h1 style="font-family:'Cinzel'; letter-spacing:10px;">FINALIZAR PEDIDO</h1>
            <p id="check-prod-name" style="font-size:0.8rem; letter-spacing:3px; margin-top:10px;"></p>
        </div>
        
        <div class="checkout-container">
            <div>
                <h3 style="margin-bottom:30px; font-size:0.8rem; letter-spacing:2px;">M√âTODO DE PAGO</h3>
                <div class="method-card" id="m-yappy" onclick="selectPay('Yappy')">
                    <b>YAPPY</b><br><small>Pago instant√°neo a @ESSENCE</small>
                </div>
                <div class="method-card" id="m-ach" onclick="selectPay('ACH')">
                    <b>TRANSFERENCIA ACH</b><br><small>Banco General / Otros</small>
                </div>
                <div class="method-card" id="m-cash" onclick="selectPay('Cash')">
                    <b>EFECTIVO</b><br><small>Solo Ciudad de Panam√°</small>
                </div>
            </div>
            
            <div>
                <h3 style="margin-bottom:30px; font-size:0.8rem; letter-spacing:2px;">RESUMEN</h3>
                <div style="background:var(--essence-gray-50); padding:40px; border:1px solid #eee;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                        <span>Subtotal</span><b id="check-sub">0$</b>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:40px;">
                        <span>Env√≠o</span><b>GRATIS</b>
                    </div>
                    <hr style="border:none; border-top:1px solid #ddd; margin-bottom:20px;">
                    <div style="display:flex; justify-content:space-between; font-size:1.5rem;">
                        <span>TOTAL</span><b id="check-total">0$</b>
                    </div>
                    <button class="btn-action" style="margin-top:40px;" onclick="confirmOrder()">COMPLETAR COMPRA</button>
                    <p onclick="closeModal('checkout-modal')" style="text-align:center; margin-top:20px; font-size:0.7rem; cursor:pointer;">VOLVER</p>
                </div>
            </div>
        </div>
    </div>

    <div class="checkout-modal" id="boss-panel">
        <div style="max-width:600px; margin:0 auto;">
            <h1 style="font-family:'Cinzel'; text-align:center; margin-bottom:40px;">CARGA DE INVENTARIO</h1>
            <input id="boss-n" class="auth-card input" placeholder="Nombre Fragancia" style="width:100%; padding:15px; margin-bottom:15px; border:1px solid #ddd;">
            <input id="boss-p" type="number" class="auth-card input" placeholder="Precio ($)" style="width:100%; padding:15px; margin-bottom:15px; border:1px solid #ddd;">
            <input id="boss-i" class="auth-card input" placeholder="URL Imagen" style="width:100%; padding:15px; margin-bottom:15px; border:1px solid #ddd;">
            <select id="boss-c" style="width:100%; padding:15px; margin-bottom:30px;">
                <option value="NICHO">NICHO</option>
                <option value="DESIGNER">DISE√ëADOR</option>
                <option value="ARABE">ARABE</option>
            </select>
            <button class="btn-action" onclick="bossAddProduct()">PUBLICAR AL CAT√ÅLOGO</button>
            <button class="btn-action" style="background:#444; margin-top:15px;" onclick="location.reload()">CERRAR PANEL</button>
        </div>
    </div>

    <footer>
        <div class="f-grid">
            <div class="f-col">
                <h2 style="font-family:'Cinzel'; font-size:1.5rem; letter-spacing:5px;">ESSENCE</h2>
                <p style="font-size:0.7rem; color:#555; margin-top:20px; line-height:2;">La plataforma definitiva de perfumer√≠a en Panam√°. Exclusividad garantizada.</p>
            </div>
            <div class="f-col">
                <h4>CLIENTE</h4>
                <a href="#" class="f-link">Mi Cuenta</a>
                <a href="#" class="f-link">Mis Pedidos</a>
                <a href="#" class="f-link">Soporte 24/7</a>
            </div>
            <div class="f-col">
                <h4>POL√çTICAS</h4>
                <a href="#" class="f-link">Garant√≠a de Originalidad</a>
                <a href="#" class="f-link">T√©rminos de Env√≠o</a>
                <a href="#" class="f-link">Devoluciones</a>
            </div>
            <div class="f-col">
                <h4>CONTACTO</h4>
                <a href="#" class="f-link">WhatsApp: +507 6902-8805</a>
                <a href="#" class="f-link">Instagram: @essence.pa</a>
            </div>
        </div>
    </footer>

    <script>
        /* SISTEMA L√ìGICO ESSENCE OMNIVERSE
           CORE ENGINE v20.0
        */

        const MASTER_WA = "50769028805";
        const MASTER_PASS = "542497";

        let db = {
            products: JSON.parse(localStorage.getItem('omni_v20_inv')) || [
                {id: 1, n: "Lafayette St Bond", p: 295, i: "https://fimgs.net/images/perfume/nd.46169.jpg", c: "NICHO", s: true},
                {id: 2, n: "Erba Pura Xerjoff", p: 250, i: "https://fimgs.net/images/perfume/nd.54003.jpg", c: "NICHO", s: true},
                {id: 3, n: "Khamrah Lattafa", p: 55, i: "https://fimgs.net/images/perfume/nd.75805.jpg", c: "ARABE", s: true},
                {id: 4, n: "Sauvage Elixir Dior", p: 160, i: "https://fimgs.net/images/perfume/nd.68305.jpg", c: "DESIGNER", s: true}
            ],
            users: JSON.parse(localStorage.getItem('omni_v20_usr')) || {},
            session: JSON.parse(localStorage.getItem('omni_v20_ses')) || null,
            cart: null,
            payment: 'Yappy',
            isAdmin: false,
            authMode: 'login',
            clicks: 0
        };

        // --- MOTOR DE RENDERIZADO ---
        function titanRender() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = "";

            db.products.forEach((p, idx) => {
                const card = document.createElement('div');
                card.className = `product-card ${!p.s ? 'is-sold-out' : ''}`;
                card.innerHTML = `
                    <div class="product-image">
                        <img src="${p.i}" alt="${p.n}">
                        <div class="status-overlay"><div class="status-stamp">AGOTADO</div></div>
                    </div>
                    <div class="product-info">
                        <span class="product-brand">${p.c}</span>
                        <h3 class="product-title">${p.n}</h3>
                        <div class="product-price">$${p.p}.00</div>
                    </div>
                    <button class="btn-action" ${!p.s ? 'disabled' : ''} onclick="initCheckout(${idx})">
                        ${p.s ? 'ADQUIRIR AHORA' : 'NO DISPONIBLE'}
                    </button>

                    <div class="boss-hud-overlay" id="boss-hud-${idx}" style="display: ${db.isAdmin ? 'grid' : 'none'}">
                        <button class="btn-boss" onclick="bossToggleStock(${idx})">${p.s ? 'AGOTAR' : 'ACTIVAR'}</button>
                        <button class="btn-boss danger" onclick="bossDelete(${idx})">ELIMINAR</button>
                    </div>
                `;
                grid.appendChild(card);
            });
            syncUI();
        }

        // --- L√ìGICA DE AUTH ---
        window.openAuth = (mode) => {
            db.authMode = (mode === 'plus') ? 'register' : 'login';
            document.getElementById('auth-title').innerText = (db.authMode === 'login') ? 'INICIAR SESI√ìN' : 'SOCIOS PLUS+';
            document.getElementById('auth-name').style.display = (db.authMode === 'login') ? 'none' : 'block';
            openModal('auth-modal');
        };

        window.switchAuth = () => {
            db.authMode = (db.authMode === 'login') ? 'register' : 'login';
            openAuth(db.authMode === 'register' ? 'plus' : 'login');
        };

        window.handleAuthAction = () => {
            const e = document.getElementById('auth-email').value;
            const n = document.getElementById('auth-name').value;
            if(!e) return alert("Ingrese correo");

            if(db.authMode === 'register') {
                db.users[e] = {name: n || 'Socio Essence', points: 0, status: 'PLUS'};
                db.session = {email: e, ...db.users[e]};
            } else {
                if(db.users[e]) db.session = {email: e, ...db.users[e]};
                else return alert("Usuario no encontrado");
            }
            save();
            location.reload();
        };

        // --- L√ìGICA DE COMPRA ---
        window.initCheckout = (idx) => {
            db.cart = db.products[idx];
            document.getElementById('check-prod-name').innerText = db.cart.n;
            document.getElementById('check-sub').innerText = db.cart.p + "$";
            document.getElementById('check-total').innerText = db.cart.p + "$";
            openModal('checkout-modal');
        };

        window.selectPay = (method) => {
            db.payment = method;
            document.querySelectorAll('.method-card').forEach(c => c.classList.remove('selected'));
            document.getElementById(`m-${method.toLowerCase()}`).classList.add('selected');
        };

        window.confirmOrder = () => {
            const user = db.session ? db.session.name : "Invitado";
            const text = encodeURIComponent(`üëë *ESSENCE ORDER*\n\nüíé *PRODUCTO:* ${db.cart.n}\nüí∞ *TOTAL:* $${db.cart.p}\nüë§ *CLIENTE:* ${user}\nüí≥ *PAGO:* ${db.payment}`);
            window.open(`https://wa.me/${MASTER_WA}?text=${text}`);
        };

        // --- ACCIONES JEFE ---
        window.bossAddProduct = () => {
            const n = document.getElementById('boss-n').value, p = document.getElementById('boss-p').value, i = document.getElementById('boss-i').value, c = document.getElementById('boss-c').value;
            if(n && p) {
                db.products.unshift({id: Date.now(), n, p, i, c, s: true});
                save(); titanRender();
                alert("PRODUCTO PUBLICADO.");
            }
        };

        window.bossToggleStock = (i) => { db.products[i].s = !db.products[i].s; save(); titanRender(); };
        window.bossDelete = (i) => { if(confirm("¬øEliminar?")) { db.products.splice(i, 1); save(); titanRender(); } };

        // --- UTILS ---
        function save() {
            localStorage.setItem('omni_v20_inv', JSON.stringify(db.products));
            localStorage.setItem('omni_v20_usr', JSON.stringify(db.users));
            localStorage.setItem('omni_v20_ses', JSON.stringify(db.session));
        }

        function syncUI() {
            if(db.session) {
                document.getElementById('u-welcome').innerText = "BIENVENIDO, " + db.session.name.toUpperCase();
                document.getElementById('u-rank').innerText = "RANGO: " + (db.session.status || "CLIENTE");
                document.getElementById('btn-login-main').innerText = "Mi Cuenta";
            }
        }

        function openModal(id) { document.getElementById(id).style.display = 'block'; if(id==='auth-modal') document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function scrollToId(id) { document.getElementById(id).scrollIntoView({behavior: 'smooth'}); }

        // TRIGGER SECRETO
        document.getElementById('master-trigger').onclick = () => {
            db.clicks++;
            if(db.clicks >= 3) {
                if(prompt("ACCESS:") === MASTER_PASS) {
                    db.isAdmin = true;
                    openModal('boss-panel');
                    titanRender();
                }
                db.clicks = 0;
            }
        };

        titanRender();
        selectPay('Yappy');

    </script>
</body>
</html>



